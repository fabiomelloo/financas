{{define "title"}}Dashboard Financeiro{{end}}

{{define "content"}}
<div class="page-header">
    <h1>Sua Jornada Financeira</h1>
    <p>Visualize seus fluxos e tome decisões com clareza.</p>
</div>

<div class="actions">
    <a href="/create" class="btn btn-primary">
        <span>+</span> Adicionar Movimento
    </a>
</div>

<div class="card">
    <div class="table-responsive">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Descrição</th>
                    <th>Valor</th>
                    <th>Tipo</th>
                    <th>Categoria</th>
                    <th>Data</th>
                    <th>Ações</th>
                </tr>
            </thead>
            <tbody>
                {{range .Expenses}}
                <tr>
                    <td>#{{.ID}}</td>
                    <td style="color: var(--text-primary); font-weight: 500;">{{.Description}}</td>

                    {{if eq .Type "receita"}}
                    <td class="amount-positive">+ R$ {{printf "%.2f" .Amount}}</td>
                    <td><span class="badge badge-receita">Entrada</span></td>
                    {{else}}
                    <td class="amount-negative">- R$ {{printf "%.2f" .Amount}}</td>
                    <td><span class="badge badge-despesa">Saída</span></td>
                    {{end}}

                    <td>{{.Category}}</td>
                    <td>{{.Date.Format "02/01/2006"}}</td>

                    <td class="table-actions">
                        <a href="/edit?id={{.ID}}" class="btn btn-warning"
                            style="padding: 0.4rem 0.8rem; font-size: 0.9rem;">Editar</a>
                        <form action="/delete" method="POST" style="display:inline;">
                            <input type="hidden" name="id" value="{{.ID}}">
                            <input type="hidden" name="csrf_token" value="{{$.CSRFToken}}">
                            <button type="submit" class="btn btn-danger"
                                style="padding: 0.4rem 0.8rem; font-size: 0.9rem;"
                                onclick="return confirm('Confirmar remoção deste registro?')">Excluir</button>
                        </form>
                    </td>
                </tr>
                {{else}}
                <tr>
                    <td colspan="7">
                        <div class="empty-state">
                            <div class="empty-state-icon">🍃</div>
                            <h3>Tudo calmo por aqui</h3>
                            <p>Adicione um novo movimento para começar seu controle.</p>
                        </div>
                    </td>
                </tr>
                {{end}}
            </tbody>
        </table>
    </div>
</div>
{{end}}